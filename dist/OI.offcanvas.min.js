/* OI-OffCanvas v0.9.1 
 * Copyright (c) 2015 Opportunity International 
 */
!function(a){a.fn.offcanvas=function(b){return this.each(function(){a(this).data("offcanvas")||a(this).data("offcanvas",new OffCanvas(a(this),b))})}}(jQuery);var OffCanvas=function(a,b){function c(){$(document).bind("keyup.offcanvas",function(a){"27"==a.keyCode&&j.close()}),j.elem.find(".close").bind("click.offcanvas",j.close),j.options.overlay.bind("click.offcanvas",j.close)}function d(){$(document).unbind("keyup.offcanvas"),j.elem.find(".close").unbind("click.offcanvas"),j.options.overlay.unbind("click.offcanvas")}function e(){"open"===j.status&&null!==j.options.breakpoint&&$(window).width()>j.options.breakpoint&&j.close()}function f(){if(j.options.displaceBody){$(".fixed").each(function(){var a={leftOrRight:null,initialValue:null};"auto"!==$(this).css("left")?(a.leftOrRight="left",a.initialValue=parseInt($(this).css("left"))):"auto"!==$(this).css("right")&&(a.leftOrRight="right",a.initialValue=parseInt($(this).css("right"))),$(this).data("fixedInfo",a)});var a={};a[j.options.direction]=0,k.css(a)}}function g(){var a={};a.width=j.width+"px",a[j.options.direction]=-j.width+"px",j.elem.css(a),"open"===j.status&&j.openTo(j.width,0)}function h(){switch(typeof j.options.width){case"function":var a=j.options.width.call(j,j.elem);"number"==typeof a?j.width=a:"string"==typeof a&&(j.width=parseInt(a)/100*k.width());break;case"string":j.width=parseInt(j.options.width)/100*k.width();break;case"number":j.width=j.options.width}}function i(){j.options.overlay.css("z-index",j.options.zIndex),j.elem.css("z-index",j.options.zIndex)}var j=this,k=$("body");this.elem=$(a),this.status="closed",this.offset=0,this.width=null,this.options=$.extend({trigger:$(".offcanvas-trigger"),overlay:$(".offcanvas-overlay"),breakpoint:null,width:300,transitionDuration:500,displaceBody:!0,direction:"right",zIndex:2,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},b),this.open=function(){return j.options.beforeOpen.call(j,j.elem)===!1?!1:(j.options.overlay.addClass("show"),j.elem.addClass("show"),setTimeout(function(){k.addClass("no-scroll"),j.openTo(j.width,j.options.transitionDuration),j.offset=j.width},1),j.status="open",c(),void setTimeout(function(){j.options.afterOpen.call(j,j.elem)},j.options.transitionDuration))},this.close=function(){return j.options.beforeClose.call(j,j.elem)===!1?!1:(j.openTo(0,j.options.transitionDuration),j.offset=0,j.status="closed",d(),void setTimeout(function(){k.removeClass("no-scroll"),j.options.overlay.removeClass("show"),j.elem.removeClass("show"),j.options.afterClose.call(j,j.elem)},j.options.transitionDuration))},this.options.trigger.on("click",function(){"open"===j.status?j.close():j.open()}),this.openTo=function(a,b){if("closed"!==j.status){if(j.options.displaceBody){var c={"transition-duration":b+"ms","-webkit-transition-duration":b+"ms"};c[j.options.direction]=a+"px",k.css(c),$(".fixed").each(function(){var c=$(this).data("fixedInfo"),d={"transition-duration":b+"ms","-webkit-transition-duration":b+"ms"},e=("left"===c.leftOrRight?-1:1)*("left"===j.options.direction?-1:1);d[c.leftOrRight]=c.initialValue+e*a+"px",$(this).css(d)})}j.options.overlay.css({opacity:Math.min(Math.max(a/j.width,0),1),"transition-duration":b+"ms","-webkit-transition-duration":b+"ms"});var d={"transition-duration":b+"ms","-webkit-transition-duration":b+"ms"};d[j.options.direction]=a-j.width+"px",j.elem.css(d)}},f(),h(),g(),i(),$(window).on("resize.offcanvas",function(){e(),h(),g()})};